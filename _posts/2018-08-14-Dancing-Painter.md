![](https://user-gold-cdn.xitu.io/2018/8/24/1656786fbb17c007?w=1080&h=879&f=jpeg&s=103791)

Painteræ˜¯ç”±[é…·å®¶ä¹ç§»åŠ¨å‰ç«¯å›¢é˜Ÿ](https://github.com/Kujiale-Mobile)æ‰“é€ çš„ä¸€æ¬¾å°ç¨‹åºç»˜å›¾ç»„ä»¶ã€‚

åŸé¡¹ç›®åœ°å€ï¼š<https://github.com/Kujiale-Mobile/Painter>

æ–°ç‰ˆåœ°å€ï¼š[https://github.com/shesw/Painter](https://github.com/shesw/Painter)

è¿™æ¬¾äº¤äº’ç‰ˆåŸæ¥æ˜¯ä¸ºäº†é’ˆå¯¹ä¸šåŠ¡ä¸­çš„æ–°éœ€æ±‚è€Œç”±æˆ‘è‡ªå·±å¼€å‘çš„ï¼Œåæ¥éœ€æ±‚æ”¹åŠ¨ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰ç”¨ä¸Šã€‚ç»„é‡Œ[å¤§ä½¬](https://github.com/CPPAlien)è€ƒè™‘ç§ç§åŸå› ï¼ˆä¸»è¦æ˜¯é¡¹ç›®æ²¡ç”¨ä¸Šï¼Œ=0=ï½ï½ï¼‰ï¼Œè®©æˆ‘å…ˆåœ¨è‡ªå·±çš„githubä¸Šå¼€æºã€‚è¿™ç‰ˆpainterä¸åŸç‰ˆçš„åŒºåˆ«åœ¨äºï¼š

1. æ·»åŠ äº†äº¤äº’äº‹ä»¶ã€‚Painteræœ¬è´¨æ˜¯ä»¥canvasä¸ºåŸºç¡€çš„ï¼Œå°ç¨‹åºçš„canvasæœ‰è®¸å¤šé™åˆ¶ã€‚å…è®¸canvasä¸Šå…ƒç´ çš„äº¤äº’ç‚¹å‡»äº‹ä»¶ï¼Œå¯ä»¥å®ç°æ›´ä¸ºä¾¿æ·çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åŸæ¥éœ€è¦åœ¨canvasä¸Šæ·»åŠ åŠŸèƒ½æŒ‰é’®ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ç”»åœ¨canvasä¸Š
2. æ·»åŠ æ‹–æ‹½å…ƒç´ çš„åŠŸèƒ½ã€‚ç›®å‰è¿™ä¸ªåŠŸèƒ½æ²¡æœ‰å®Œå–„å¥½ï¼Œå› ä¸ºå®ƒçš„æ»‘åŠ¨åŠ¨ä½œä¼šä¸å°ç¨‹åºçš„å…¨å±æ»‘åŠ¨äº‹ä»¶å†²çªï¼Œå› æ­¤ï¼Œæ‹–æ‹½åŠŸèƒ½åœ¨å›ºå®šçš„é¡µé¢ä¸Šæ•ˆæœæ‰å¥½ï¼Œå¦‚åœ¨æ‹–æ‹½æ—¶è®¾ç½®overflow: hiddenç­‰ã€‚



##### è¿™é‡Œå°†æ–°ç‰ˆçš„Painterç§°ä¸ºdancing-painterã€‚å¼•å…¥æ–¹å¼è¯·å‚è€ƒreadmeå’Œdemoã€‚



#### æ¼”ç¤ºï¼š

![](https://user-gold-cdn.xitu.io/2018/8/24/1656787f44caf810?w=328&h=480&f=gif&s=2575274)



#### ä¸»è¦åŠŸèƒ½ï¼š

æŒ‡åŸç‰ˆçš„painterçš„åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½ä¾ç„¶æ˜¯æœ¬é¡¹ç›®çš„ä¸»(å®)è¦(ç”¨)åŠŸèƒ½ã€‚

##### ç®€ä»‹ï¼š

åŸç‰ˆçš„ä½¿ç”¨ç®€ä»‹è¯·å‚è§ [https://juejin.im/post/5b40b158e51d4518f543c7b0](https://juejin.im/post/5b40b158e51d4518f543c7b0)

ç®€å•æ¥è®²ï¼Œä½¿ç”¨è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥ç»“åˆdemoæ¥çœ‹ï¼š

![](https://user-gold-cdn.xitu.io/2018/8/23/1656781c023e1f01?w=1921&h=1867&f=png&s=399088 )

è·ç¦»é¦–æ¬¡å¼€æºPainteråº“å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œè¿™æœŸé—´è·ç›Šäºå„è·¯é“å‹çš„å¸®åŠ©å’Œæç‚¹ï¼ŒPainterè¿›è¡Œäº†å‡ æ³¢æ›´æ–°ï¼ˆ[åŸé¡¹ç›®åœ°å€](https://github.com/Kujiale-Mobile/Painter))ï¼š

##### æ–°å¢ç‰¹æ€§ï¼š

1. å¢åŠ alignå±æ€§ï¼Œå¯ä»¥ä½¿ä»»æ„å…ƒç´ å¯ä»¥å®ç°å·¦ä¸­å³å¯¹é½ã€‚
2. åŠ å…¥æ–‡å­—æ¢è¡Œçš„èƒ½åŠ›ã€‚å¯¹ä¸€æ®µæ–‡å­—è®¾ç½®widthæˆ–è€…maxLinesï¼Œéƒ½æœ‰å¯èƒ½è§¦å‘æ–‡å­—çš„æ¢è¡Œã€‚
3. æ·»åŠ æ–‡å­—çš„ä¸€äº›å±æ€§ï¼šfontWeight, textDecoration, textStyel(fill, stroke), maxLines, lineHeight
4. å›¾ç‰‡modeå±æ€§ï¼Œå®ç°å›¾ç‰‡è£å‰ªã€ç¼©æ”¾ï¼Œé»˜è®¤ä¸ºaspectFill
5. å›¾ç‰‡ä¸è®¾ç½®width, heightiå±æ€§ï¼Œä½¿ç”¨é»˜è®¤å®½é«˜
6. left, right, top, bottomå¯¹è´Ÿæ•°çš„æ”¯æŒ

##### ä¿®å¤é—®é¢˜ï¼š

1. æŸäº›æœºå‹ä¸Šåˆ‡è¾¹ä¼šå‡ºç°é»‘çº¿ã€‚
2. å®‰å“æœºå‹ä¸Šåœ†è§’æ— æ³•æ˜¾ç¤º
3. ä½¿ç”¨æ–‡ä»¶å‰æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ­£å¸¸
4. äºŒç»´ç å¤§å°æ˜¾ç¤ºå¼‚å¸¸



#### äº¤äº’åŠŸèƒ½ï¼š

è¿™ä¸€ç‰ˆçš„ç‰¹è‰²ä¸»è¦æ˜¯å…·å¤‡å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶å®ç°ä»¥åŠæ‹–æ‹½åŠŸèƒ½ï¼Œåšå‡ºæ¥ä»¥åå› ä¸ºé¡¹ç›®ä¸Šæš‚æ—¶ç”¨ä¸ä¸Šï¼Œæ‰€ä»¥æ„Ÿè§‰åŠŸèƒ½ä¸Šå¯èƒ½æ¯”è¾ƒé¸¡è‚‹ã€‚ä¸è¿‡è¿˜è›®å¥½ç©çš„ğŸ˜„

åœ¨demoä¸­ç§°ä¹‹ä¸ºdancing-painterã€‚

**å¼ºè°ƒï¼š**è¦ä½¿ç”¨äº¤äº’åŠŸèƒ½ï¼Œæœ‰ä¸€ä¸‹ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š

1. å¯¼å…¥paletteæ—¶ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„æ–¹æ³•å¯¼å…¥
2. paletteç±»ï¼Œä»¥module.exportsè¾“å‡ºã€‚

åŸå› ï¼šå°ç¨‹åºé¡µé¢å‘ç»„ä»¶ä¼ å€¼æ—¶ï¼Œä¼šæŠŠå¯¹è±¡å‚æ•°åšä¸€ä¸ªç±»ä¼¼äºJSON.parse(JSON.stringfy())çš„æ‹·è´ï¼Œå¯¼è‡´å¯¹è±¡ä¸­çš„å‡½æ•°åœ¨ä¼ é€’åä¸¢å¤±ã€‚å› æ­¤åœ¨dancing-painterä¸­ï¼Œé€‰æ‹©è®²paletteï¼ˆå³ç”Ÿæˆå›¾ç‰‡çš„jsonä»£ç ï¼‰çš„è·¯å¾„ä¼ é€’ç»™painterç»„ä»¶ï¼Œåœ¨ç»„ä»¶å†…requireåˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå†åˆæˆæ‰€éœ€çš„jsonæ•°æ®ã€‚

å¯¼å…¥ä»£ç å¦‚ä¸‹ï¼š

```js
    //ç›´æ¥å¯¼å…¥æ•°æ®
	// const template = new DCard().palette(); 
	//å¯¼å…¥ç»å¯¹è·¯å¾„
    const template = {
      path: '/palette/dancing-card.js',
      data: {},
    };
    this.setData({
      template: template,
    });
```

paletteï¼š

```js
//ä½äº/palette/dancing-card.js
class PaletteCard {
    context = {}
    constructor(data) {
        this.data = data;
    }
    palette() {
        return{
            ...
        }
    }
}
module.exports = PaletteCard;
```



##### å®ç°ç‚¹å‡»æ•ˆæœ

Painterçš„å…ƒç´ ç»˜åˆ¶æ˜¯ä»¥jsonçš„å½¢å¼ç»™å‡ºçš„ï¼Œå…¶äº¤äº’è¡Œä¸ºå’Œæ‹–æ‹½æ•ˆæœä¹Ÿå®šä¹‰åœ¨ç›¸åº”çš„jsonæ–‡ä»¶é‡Œã€‚

åœ¨éœ€è¦è®¾å®šæŸä¸€ä¸ªå…ƒç´ çš„ç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨å…¶ç›¸åº”çš„jsonä»£ç é‡ŒåŠ å…¥methodså±æ€§å³å¯ã€‚è¯¥å±æ€§æ”¯æŒä¸€ä¸‹å‡ ç§ç‚¹å‡»æ–¹å¼ï¼š

| name       | description |
| :--------- | :---------- |
| tap        | ç‚¹å‡»        |
| longpress  | é•¿æŒ‰        |
| touchstart | å¼€å§‹è§¦æ‘¸    |
| touchmove  | ç§»åŠ¨        |
| touchend   | è§¦æ‘¸ç»“æŸ    |

æ¯ä¸€ä¸ªæ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªbooleanå€¼ï¼Œä»¥è¡¨ç¤ºæ˜¯å¦æ‹¦æˆªè¯¥äº‹ä»¶ã€‚åœ¨dancing-painterä¸­ï¼Œå¦‚æœåœ¨é¡µé¢ä¸Šå…ƒç´ æœ‰é‡å ï¼Œåˆ™æ–¹æ³•çš„ä¼ é€’é»˜è®¤æ˜¯ç”±ä¸‹è€Œä¸Šçš„ï¼›åœ¨ä»»æ„ä¸€ä¸ªå…ƒç´ çš„methodsæ–¹æ³•ä¸­ï¼Œå¯ä»¥è¿”å›trueæ¥æ‹¦æˆªè¯¥äº‹ä»¶ã€‚

##### ä½¿ç”¨æ‹–æ‹½åŠŸèƒ½

ä½¿ç”¨animationå±æ€§ï¼Œç›®å‰åªæ”¯æŒæ‹–æ‹½èƒ½åŠ›ã€‚ç”±äºå­˜åœ¨ä¸å±å¹•çš„æ»‘åŠ¨å†²çªï¼ˆå¦‚æœæœ‰å¤§ç¥çŸ¥é“æ€ä¹ˆæˆªè·å±å¹•çš„æ»‘åŠ¨äº‹ä»¶ï¼Œå¦‚é•¿é¡µé¢çš„æ»šåŠ¨ï¼Œè¯·åƒä¸‡ä¸åèµæ•™å‘Šè¯‰æˆ‘å“ˆï¼‰ï¼Œéœ€è¦åœ¨ä½¿ç”¨æ—¶å›ºå®šä½æ•´ä¸ªé¡µé¢ï¼Œå¦‚è®¾ç½®overflow: hiddenã€‚

ä½¿ç”¨ï¼šè®¾ç½®animation:{drag:true}

##### ç¤ºä¾‹ï¼š

```js
{
      width: '700rpx',
      height: '1000rpx',
      background: '#eee',
      views: [{
        type: 'qrcode',
        content: 'https://github.com/Kujiale-Mobile/Painter',
        css: {
          top: '40rpx',
          left: '180rpx',
          color: 'red',
          borderWidth: '10rpx',
          borderColor: 'blue',
          width: '120rpx',
          height: '120rpx',
          align: 'center',
        },
        methods: {
          tap() {
            console.log('qrcode');
          },
        }
      },
      {
        type: 'rect',
        css: {
          top: '40rpx',
          left: '180rpx',
          color: 'green',
          borderRadius: '20rpx',
          borderWidth: '10rpx',
          width: '120rpx',
          height: '120rpx',
        },
        methods: {
          tap() {
            // è°ƒç”¨å½“å‰é¡µé¢çš„functionæ–¹æ³•
            const pages = this.getCurrentPages();
            const currentPage = pages[pages.length-1];
            currentPage.function();
          },
        },
        animation: {
          drag: true,
        },
      }]
}
```



##### äº‹ä»¶å†’æ³¡

äº‹ä»¶é»˜è®¤æ˜¯å†’æ³¡ä¼ é€’çš„ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š

ä¸Šé¢çš„ä»£ç ä¸­æ˜¯ä¸¤ä¸ªéƒ¨åˆ†é‡å çš„äºŒç»´ç å’Œæ–¹å½¢ï¼š

![](https://user-gold-cdn.xitu.io/2018/8/23/16567818bd5b8887?w=370&h=228&f=png&s=24998)



ç‚¹å‡»äºŒè€…çš„é‡åˆéƒ¨åˆ†ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š

![](https://user-gold-cdn.xitu.io/2018/8/23/165678181b85eee8?w=328&h=104&f=png&s=10677)



##### æ€§èƒ½

æ‹–æ‹½åŠŸèƒ½æ˜¯ä¸€ç§åŠ¨ç”»ç°è±¡ï¼Œæ¶‰åŠåˆ°canvasçš„é‡ç»˜ã€‚ç»è¿‡æµ‹è¯•ï¼Œåœ¨IDEä¸Šé‡ç»˜é€Ÿåº¦å¾ˆå¿«ï¼Œåœ¨çœŸæœºä¸Šæœ‰æ•°é‡çº§çš„å·®åˆ«ã€‚

åŠ¨ç”»æ•ˆæœçš„è¿è´¯æ€§ä¸»è¦æ˜¯ç”±canvas.draw()çš„é€Ÿåº¦å†³å®šçš„ã€‚

ä¸‹å›¾å±•ç¤ºäº†åœ¨demoä¸»é¡µä¸Šï¼Œcanvas.draw()æ–¹æ³•åœ¨ideå’ŒçœŸæœºä¸Šè¿è¡Œçš„æ—¶é—´å·®åˆ«ï¼ˆå•ä½ï¼šmsï¼‰ï¼š

IDE:					çœŸæœºï¼ˆåä¸ºè£è€€8ï¼‰ï¼š

![](https://user-gold-cdn.xitu.io/2018/8/23/16567817f3710756?w=184&h=1106&f=png&s=28274 ) 			 ![](https://user-gold-cdn.xitu.io/2018/8/23/1656781801208348?w=200&h=952&f=png&s=35604)



#### ç»“è¯­

æ„Ÿè°¢[å¤§ä½¬](https://github.com/CPPAlien)åœ¨å¼€å‘ä¸­å¯¹æˆ‘çš„æ— é™å¸®åŠ©ã€‚

æ„Ÿè°¢Â [demi520](https://github.com/demi520)Â çš„Â [wxapp-qrcode](https://github.com/demi520/wxapp-qrcode)Â åº“ï¼ŒPainter ä¸­äºŒç»´ç ç»˜åˆ¶éƒ¨åˆ†ä½¿ç”¨äº†è¯¥åº“çš„éƒ¨åˆ†ä»£ç ï¼Œå¹¶åšäº†äº›ä¿®æ”¹ã€‚

å¦å¤–è¿™é‡Œæœ‰ä¸€ç¯‡[wiki](https://github.com/Kujiale-Mobile/Painter/wiki/mpvue-%E6%8E%A5%E5%85%A5%E6%96%B9%E5%BC%8F)ç®€å•ä»‹ç»äº†æ€æ ·åœ¨mpvueä¸­ä½¿ç”¨Painterã€‚

**å‘ï¼š**ï¼šmpvueåœ¨æ›´æ–°æŸä¸€ä¸ªé¡µé¢å…ƒç´ çš„å€¼çš„æ—¶å€™ï¼Œä¼šåŒæ—¶æŠŠæ‰€æœ‰dataä¸­å­˜åœ¨çš„å…ƒç´ éƒ½æ›´æ–°ä¸€éã€‚

è¿™å°±é€ æˆäº†[è¿™ä¸ªé—®é¢˜](https://github.com/Kujiale-Mobile/Painter/issues/24)ï¼šPainterç»˜åˆ¶å®Œæˆåï¼Œä¼šè§¦å‘onImgOKå‡½æ•°ï¼Œä¼ å‡ºå›¾ç‰‡çš„urlã€‚è¿™æ—¶å°†è¯¥urlä¼ å…¥æŸimageçš„srcä¸­å»ï¼ŒåŒæ—¶å°±ä¼šè§¦å‘Painterçš„templateçš„å†èµ‹å€¼ï¼Œä»è€Œå¯¼è‡´æ— é™é‡ç»˜ã€‚



**æœ€åï¼Œä½œä¸ºç¨‹åºå‘˜å±Šçš„æ–°æ‰‹å’Œèœé¸Ÿï¼Œè¯šé‚€å„è·¯å¤§ç¥ç”¨issueå’Œå»ºè®®ç ¸æ­»æˆ‘ğŸ˜‚**

**æœ€åï¼Œä½œä¸ºç¨‹åºå‘˜å±Šçš„æ–°æ‰‹å’Œèœé¸Ÿï¼Œè¯šé‚€å„è·¯å¤§ç¥ç”¨issueå’Œå»ºè®®ç ¸æ­»æˆ‘ğŸ˜‚**

**æœ€åï¼Œä½œä¸ºç¨‹åºå‘˜å±Šçš„æ–°æ‰‹å’Œèœé¸Ÿï¼Œè¯šé‚€å„è·¯å¤§ç¥ç”¨issueå’Œå»ºè®®ç ¸æ­»æˆ‘ğŸ˜‚**



##### demoä¼ é€é—¨ï¼š[https://github.com/shesw/Painter](https://github.com/shesw/Painter)

##### ä½¿ç”¨å‚è€ƒï¼ˆåŸç‰ˆï¼‰ï¼š [https://juejin.im/post/5b40b158e51d4518f543c7b0](https://juejin.im/post/5b40b158e51d4518f543c7b0)

------------------